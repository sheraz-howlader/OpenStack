Create Database
════════════════════<>════════════════════
sudo mysql -u root -p

CREATE DATABASE nova_api;
CREATE DATABASE nova;
CREATE DATABASE nova_cell0;
CREATE DATABASE nova_placement;
GRANT ALL PRIVILEGES ON nova_api.* TO 'nova'@'localhost' IDENTIFIED BY 'NOVA_DBPASS';
GRANT ALL PRIVILEGES ON nova.* TO 'nova'@'localhost' IDENTIFIED BY 'NOVA_DBPASS';
GRANT ALL PRIVILEGES ON nova_cell0.* TO 'nova'@'localhost' IDENTIFIED BY 'NOVA_DBPASS';
GRANT ALL PRIVILEGES ON nova_placement.* TO 'nova'@'localhost' IDENTIFIED BY 'NOVA_DBPASS';
FLUSH PRIVILEGES;
exit;

════════════════════<>════════════════════
Install Nova components
════════════════════<>════════════════════
sudo apt install nova-api nova-conductor nova-scheduler nova-novncproxy -y

════════════════════<>════════════════════
Install Nova Compute
════════════════════<>════════════════════
sudo apt install -y nova-compute qemu-kvm libvirt-daemon-system

sudo systemctl enable --now libvirtd
sudo systemctl restart nova-compute

<!--nova-compute প্যাকেজ (single-node এ অবশ্যই লাগবে)-->
════════════════════<>════════════════════
vim /etc/nova/nova.conf
════════════════════<>════════════════════
[DEFAULT]
transport_url = rabbit://openstack:RABBIT_PASS@206.162.244.147
auth_strategy = keystone
my_ip = 206.162.244.147
use_neutron = True
firewall_driver = nova.virt.firewall.NoopFirewallDriver

[api]
auth_strategy = keystone

[api_database]
connection = mysql+pymysql://nova:NOVA_DBPASS@localhost/nova_api

[database]
connection = mysql+pymysql://nova:NOVA_DBPASS@localhost/nova

[keystone_authtoken]
www_authenticate_uri = http://206.162.244.147:5000
auth_url = http://206.162.244.147:5000
memcached_servers = 127.0.0.1:11211
auth_type = password
project_domain_name = Default
user_domain_name = Default
project_name = service
username = nova
password = NOVA_PASS

[vnc]
enabled = True
vncserver_listen = 0.0.0.0
vncserver_proxyclient_address = $my_ip
novncproxy_base_url = http://206.162.244.147:6080/vnc_auto.html

[glance]
api_servers = http://206.162.244.147:9292

[oslo_concurrency]
lock_path = /var/lib/nova/tmp

[placement]
auth_type = password
auth_url = http://206.162.244.147:5000/v3
os_region_name = RegionOne
project_domain_name = Default
user_domain_name = Default
project_name = service
username = placement
password = PLACEMENT_PASS

[neutron]
url = http://206.162.244.147:9696
auth_url = http://206.162.244.147:5000
auth_type = password
project_domain_name = Default
user_domain_name = Default
region_name = RegionOne
project_name = service
username = neutron
password = NEUTRON_PASS
# (optional but recommended for metadata later)
service_metadata_proxy = True
metadata_proxy_shared_secret = META_SECRET

[service_user]
send_service_user_token = true
auth_url = http://206.162.244.147:5000/v3
auth_type = password
project_domain_name = Default
user_domain_name = Default
project_name = service
username = nova
password = NOVA_PASS
region_name = RegionOne

[libvirt]
virt_type = qemu   # যদি nested VT থাকে kvm, সাময়িকভাবে: virt_type = qemu

════════════════════<>════════════════════
Sync Nova databases
════════════════════<>════════════════════
sudo nova-manage api_db sync
sudo nova-manage cell_v2 map_cell0
sudo nova-manage cell_v2 create_cell --name=cell1
sudo nova-manage db sync

Restart services:
sudo systemctl restart nova-api nova-scheduler nova-conductor nova-novncproxy nova-compute

════════════════════<>════════════════════
Create Nova User:
openstack user create --domain Default --password NOVA_PASS nova
openstack role add --project service --user nova admin

openstack service create --name nova --description "OpenStack Compute" compute
openstack endpoint create --region RegionOne compute public   http://206.162.244.147:8774/v2.1
openstack endpoint create --region RegionOne compute internal http://206.162.244.147:8774/v2.1
openstack endpoint create --region RegionOne compute admin    http://206.162.244.147:8774/v2.1

════════════════════<>════════════════════
Compute host কে cell-এ আবিষ্কার করো:
════════════════════<>════════════════════
sudo nova-manage cell_v2 discover_hosts

Check everything is fine:
sudo nova-status upgrade check

Check nova services and hypervisor:
openstack compute service list
openstack hypervisor list

════════════════════<>════════════════════
Update Nova endpoints
════════════════════<>════════════════════
openstack endpoint set --url http://206.162.244.147:8774/v2.1 $(openstack endpoint list --service compute --interface public   -f value -c ID)
openstack endpoint set --url http://206.162.244.147:8774/v2.1 $(openstack endpoint list --service compute --interface internal -f value -c ID)
openstack endpoint set --url http://206.162.244.147:8774/v2.1 $(openstack endpoint list --service compute --interface admin    -f value -c ID)

════════════════════<>════════════════════
