Create Database
════════════════════<>════════════════════
sudo mysql -u root -p

CREATE DATABASE neutron;
GRANT ALL PRIVILEGES ON neutron.* TO 'neutron'@'localhost' IDENTIFIED BY 'NEUTRON_DBPASS';
FLUSH PRIVILEGES;
exit;

════════════════════<>════════════════════
Install Neutron components
════════════════════<>════════════════════
sudo apt install neutron-server neutron-plugin-ml2 neutron-linuxbridge-agent neutron-dhcp-agent neutron-metadata-agent -y

════════════════════<>════════════════════
vim /etc/neutron/neutron.conf
════════════════════<>════════════════════
[DEFAULT]
core_plugin = ml2
service_plugins = router
allow_overlapping_ips = True
transport_url = rabbit://openstack:RABBIT_PASS@206.162.244.147
auth_strategy = keystone

[database]
connection = mysql+pymysql://neutron:NEUTRON_DBPASS@localhost/neutron

[keystone_authtoken]
www_authenticate_uri = http://206.162.244.147:5000
auth_url = http://206.162.244.147:5000
memcached_servers = 127.0.0.1:11211
auth_type = password
project_domain_name = Default
user_domain_name = Default
project_name = service
username = neutron
password = NEUTRON_PASS

════════════════════<>════════════════════
Restart
════════════════════<>════════════════════
sudo systemctl restart neutron-server neutron-linuxbridge-agent neutron-dhcp-agent neutron-metadata-agent

════════════════════<>════════════════════
Create Neutron User:
openstack user create --domain Default --password NEUTRON_PASS neutron
openstack role add --project service --user neutron admin

openstack service create --name neutron --description "OpenStack Networking" network
openstack endpoint create --region RegionOne network public   http://206.162.244.147:9696
openstack endpoint create --region RegionOne network internal http://206.162.244.147:9696
openstack endpoint create --region RegionOne network admin    http://206.162.244.147:9696

════════════════════<>════════════════════
Configure ML2 and Linuxbridge agent
════════════════════<>════════════════════
sudo tee /etc/neutron/plugins/ml2/ml2_conf.ini >/dev/null <<'EOF'
[ml2]
type_drivers = flat,vlan,vxlan
tenant_network_types = vxlan
mechanism_drivers = linuxbridge
extension_drivers = port_security

[ml2_type_flat]
flat_networks = *

[ml2_type_vxlan]
vni_ranges = 1:1000

[securitygroup]
enable_ipset = True
EOF

════════════════════<>════════════════════
Linuxbridge agent (single node, provider network টেম্পলেট):
════════════════════<>════════════════════
sudo tee /etc/neutron/plugins/ml2/linuxbridge_agent.ini >/dev/null <<'EOF'
[linux_bridge]
physical_interface_mappings = provider:eth0

[vxlan]
enable_vxlan = True
local_ip = 206.162.244.147
l2_population = True

[securitygroup]
enable_security_group = True
firewall_driver = neutron.agent.linux.iptables_firewall.IptablesFirewallDriver
EOF


NOTE: ml2_conf.ini-এ NIC নাম সঠিক কিনা নিশ্চিত হও (আমি আগে physical_interface_mappings = provider:eth0 দিয়েছিলাম—তোমার ইন্টারফেস যদি ens3/enp1s0 হয়, সেটা বসাও):
ip -br a   # দেখে ঠিক নাম বসাও

════════════════════<>════════════════════
Neutron DB migrate (Yoga, ML2)
════════════════════<>════════════════════
sudo -u neutron neutron-db-manage \
--config-file /etc/neutron/neutron.conf \
--config-file /etc/neutron/plugins/ml2/ml2_conf.ini upgrade heads

════════════════════<>════════════════════
Reachability Test:
curl -s http://206.162.244.147:9696 | head

════════════════════<>════════════════════
Update Neutron endpoints
════════════════════<>════════════════════
openstack endpoint set --url http://206.162.244.147:9696 $(openstack endpoint list --service network --interface public   -f value -c ID)
openstack endpoint set --url http://206.162.244.147:9696 $(openstack endpoint list --service network --interface internal -f value -c ID)
openstack endpoint set --url http://206.162.244.147:9696 $(openstack endpoint list --service network --interface admin    -f value -c ID)

════════════════════<>════════════════════
